/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import org.thingml.generated.gui.WeatherStationGUIMock;
import org.thingml.java.Connector;
public class Main {
	public static void main(String args[]) {
		// Things
		final byte[] JavaWeatherNode_serializer_buffer_array = new byte[16];
		final MessageSerializer MessageSerializer_JavaWeatherNode_serializer = (MessageSerializer) new MessageSerializer(
				"JavaWeatherNode_serializer: MessageSerializer", (byte) 2,
				(byte) 8, (byte) 2, (short) 16, (byte) 0x12, (byte) 0x13,
				(byte) 0x7D, (int) 3, (int) 4, (int) 5,
				JavaWeatherNode_serializer_buffer_array, (int) 0)
				.buildBehavior();
		final WeatherStation WeatherStation_JavaWeatherNode_app = (WeatherStation) new WeatherStation(
				"JavaWeatherNode_app: WeatherStation").buildBehavior();
		final SerialJava SerialJava_JavaWeatherNode_serial = (SerialJava) new SerialJava(
				"JavaWeatherNode_serial: SerialJava", (String) "COM13",
				(org.thingml.comm.rxtx.Serial4ThingML) null).buildBehavior();
		final WeatherStationGUIMock WeatherStationGUI_JavaWeatherNode_gui = new WeatherStationGUIMock(
				"WeatherStationGUI_JavaWeatherNode_gui");
		final byte[] JavaWeatherNode_deserializer_buffer_array = new byte[16];
		final MessageDeserializer MessageDeserializer_JavaWeatherNode_deserializer = (MessageDeserializer) new MessageDeserializer(
				"JavaWeatherNode_deserializer: MessageDeserializer", (byte) 2,
				(byte) 8, (byte) 2, (short) 16, (byte) 0x12, (byte) 0x13,
				(byte) 0x7D, (int) 3, (int) 4, (int) 5,
				JavaWeatherNode_deserializer_buffer_array, (int) 0)
				.buildBehavior();
		// Connectors
		/* final Connector c_1045182361 = */new Connector(
				MessageDeserializer_JavaWeatherNode_deserializer.getIn_port(),
				SerialJava_JavaWeatherNode_serial.getIOStream_port(),
				MessageDeserializer_JavaWeatherNode_deserializer,
				SerialJava_JavaWeatherNode_serial);
		/* final Connector c_2111192514 = */new Connector(
				MessageDeserializer_JavaWeatherNode_deserializer
						.getRemoteControl_port(),
				WeatherStation_JavaWeatherNode_app.getRemoteControlIn_port(),
				MessageDeserializer_JavaWeatherNode_deserializer,
				WeatherStation_JavaWeatherNode_app);
		/* final Connector c_2087767064 = */new Connector(
				MessageSerializer_JavaWeatherNode_serializer.getOut_port(),
				SerialJava_JavaWeatherNode_serial.getIOStream_port(),
				MessageSerializer_JavaWeatherNode_serializer,
				SerialJava_JavaWeatherNode_serial);
		/* final Connector c_1365736315 = */new Connector(
				MessageSerializer_JavaWeatherNode_serializer
						.getRemoteControl_port(),
				WeatherStation_JavaWeatherNode_app.getRemoteControlOut_port(),
				MessageSerializer_JavaWeatherNode_serializer,
				WeatherStation_JavaWeatherNode_app);
		/* final Connector c_1625027069 = */new Connector(
				WeatherStation_JavaWeatherNode_app.getGui_port(),
				WeatherStationGUI_JavaWeatherNode_gui.getGui_port(),
				WeatherStation_JavaWeatherNode_app,
				WeatherStationGUI_JavaWeatherNode_gui);
		// Starting Things
		MessageSerializer_JavaWeatherNode_serializer.start();
		WeatherStationGUI_JavaWeatherNode_gui.start();
		MessageDeserializer_JavaWeatherNode_deserializer.start();
		SerialJava_JavaWeatherNode_serial.start();
		WeatherStation_JavaWeatherNode_app.start();
		Runtime.getRuntime().addShutdownHook(new Thread() {
			public void run() {
				System.out.println("Terminating ThingML app...");
				WeatherStation_JavaWeatherNode_app.stop();
				SerialJava_JavaWeatherNode_serial.stop();
				MessageSerializer_JavaWeatherNode_serializer.stop();
				WeatherStationGUI_JavaWeatherNode_gui.stop();
				MessageDeserializer_JavaWeatherNode_deserializer.stop();
				System.out.println("ThingML app terminated. RIP!");
			}
		});

	}
}
